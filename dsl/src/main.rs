//! Demo chÆ°Æ¡ng trÃ¬nh sá»­ dá»¥ng Banking DSL
//! 
//! ChÆ°Æ¡ng trÃ¬nh nÃ y minh há»a cÃ¡ch sá»­ dá»¥ng DSL Ä‘á»ƒ mÃ´ táº£
//! cÃ¡c nghiá»‡p vá»¥ ngÃ¢n hÃ ng báº±ng cÃº phÃ¡p thÃ¢n thiá»‡n.

use banking_dsl::*;

fn main() {
    println!("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    println!("â•‘     ğŸ¦ MÃ” PHá»NG NGHIá»†P Vá»¤ NGÃ‚N HÃ€NG Vá»šI DSL ğŸ¦            â•‘");
    println!("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 1: Nghiá»‡p vá»¥ cÆ¡ báº£n
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("ğŸ“‹ VÃ Dá»¤ 1: Nghiá»‡p vá»¥ cÆ¡ báº£n");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
    println!("YÃªu cáº§u nghiá»‡p vá»¥:");
    println!("  1. Tiá»n gá»­i vÃ o ngÃ¢n hÃ ng: 100 triá»‡u");
    println!("  2. HÃ ng nÄƒm trá»« phÃ­ quáº£n lÃ½: 1 triá»‡u");
    println!("  3. LÃ£i suáº¥t linh hoáº¡t: 0.2%/nÄƒm cá»™ng vÃ o gá»‘c");
    println!();

    // Sá»­ dá»¥ng DSL - cÃº phÃ¡p gáº§n vá»›i ngÃ´n ngá»¯ tá»± nhiÃªn
    let mut tai_khoan = tiet_kiem!(tiá»n_gá»­i 100.0);
    tiet_kiem!(trá»«_phÃ­ 1.0, cho tai_khoan);
    tiet_kiem!(cá»™ng_lÃ£i 0.002, cho tai_khoan);

    println!("\nğŸ“Š Sá»‘ dÆ° cuá»‘i ká»³: {:.2} triá»‡u", tiet_kiem!(sá»‘_dÆ° tai_khoan));
    println!("   Ká»³ vá»ng: (100 - 1) + (99 Ã— 0.002) = 99.20 triá»‡u âœ“");

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 2: MÃ´ phá»ng nhiá»u nÄƒm
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("\n\nğŸ“‹ VÃ Dá»¤ 2: MÃ´ phá»ng 3 nÄƒm");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

    let mut tk_3_nam = tiet_kiem!(tiá»n_gá»­i 100.0);
    mo_phong_nam!(3, tk_3_nam, phÃ­: 1.0, lÃ£i: 0.002);

    tiet_kiem!(hiá»ƒn_thá»‹ tk_3_nam);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 3: Giao dá»‹ch gá»­i/rÃºt
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("\n\nğŸ“‹ VÃ Dá»¤ 3: Giao dá»‹ch gá»­i/rÃºt");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

    let mut tk_giao_dich = tiet_kiem!(tiá»n_gá»­i 50.0);
    
    // Gá»­i thÃªm tiá»n
    tiet_kiem!(gá»­i_thÃªm 30.0, vÃ o tk_giao_dich);
    
    // RÃºt tiá»n (thÃ nh cÃ´ng)
    let _ = tiet_kiem!(rÃºt 20.0, tá»« tk_giao_dich);
    
    // RÃºt tiá»n (tháº¥t báº¡i - khÃ´ng Ä‘á»§ sá»‘ dÆ°)
    let _ = tiet_kiem!(rÃºt 100.0, tá»« tk_giao_dich);

    tiet_kiem!(hiá»ƒn_thá»‹ tk_giao_dich);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 4: LÃ£i suáº¥t báº­c thang (Tiered Interest)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("\n\nğŸ“‹ VÃ Dá»¤ 4: LÃ£i suáº¥t báº­c thang");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
    println!("Quy táº¯c lÃ£i suáº¥t:");
    println!("  - Sá»‘ dÆ° < 50 triá»‡u:  0.1%/nÄƒm");
    println!("  - Sá»‘ dÆ° 50-100 triá»‡u: 0.2%/nÄƒm");
    println!("  - Sá»‘ dÆ° > 100 triá»‡u:  0.3%/nÄƒm");
    println!();

    let mut tk_vip = tiet_kiem!(tiá»n_gá»­i 120.0);
    
    // Ãp dá»¥ng lÃ£i suáº¥t báº­c thang
    let balance = tk_vip.get_balance();
    let rate = if balance < 50.0 {
        0.001
    } else if balance < 100.0 {
        0.002
    } else {
        0.003
    };
    println!("ğŸ“ˆ Ãp dá»¥ng lÃ£i suáº¥t báº­c thang: {:.2}% cho sá»‘ dÆ° {:.2}", rate * 100.0, balance);
    tiet_kiem!(cá»™ng_lÃ£i rate, cho tk_vip);

    tiet_kiem!(hiá»ƒn_thá»‹ tk_vip);

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Tá»”NG Káº¾T
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    println!("â•‘                    ğŸ‰ HOÃ€N Táº¤T DEMO ğŸ‰                     â•‘");
    println!("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£");
    println!("â•‘  DSL giÃºp chuyÃªn viÃªn nghiá»‡p vá»¥:                          â•‘");
    println!("â•‘  âœ“ MÃ´ táº£ logic báº±ng cÃº phÃ¡p thÃ¢n thiá»‡n                   â•‘");
    println!("â•‘  âœ“ Giáº£m lá»—i nhá» kiá»ƒm tra kiá»ƒu dá»¯ liá»‡u                    â•‘");
    println!("â•‘  âœ“ Dá»… Ä‘á»c, dá»… xÃ¡c nháº­n yÃªu cáº§u                           â•‘");
    println!("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
}
