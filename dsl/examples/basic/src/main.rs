//! # VÃ­ dá»¥ cÆ¡ báº£n - Banking DSL
//! 
//! Minh há»a cÃ¡ch sá»­ dá»¥ng DSL cho nghiá»‡p vá»¥ ngÃ¢n hÃ ng Ä‘Æ¡n giáº£n.

use dsl_macros::*;

fn main() {
    println!("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    println!("â•‘           ğŸ¦ VÃ Dá»¤ CÆ  Báº¢N - BANKING DSL ğŸ¦                â•‘");
    println!("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n");

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 1: Táº¡o tÃ i khoáº£n Ä‘Æ¡n giáº£n
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("ğŸ“‹ VÃ Dá»¤ 1: Táº¡o tÃ i khoáº£n");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

    // Sá»­ dá»¥ng DSL macro
    let mut tk = tÃ i_khoáº£n!(tiáº¿t_kiá»‡m "TK001", 100.0);
    tk.display();

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 2: Giao dá»‹ch cÆ¡ báº£n
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("\nğŸ“‹ VÃ Dá»¤ 2: Giao dá»‹ch cÆ¡ báº£n");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

    // Gá»­i thÃªm tiá»n
    let _ = tk.deposit(VND::new(50.0), "Gá»­i thÃªm tiá»n");
    
    // RÃºt tiá»n
    let _ = tk.withdraw(VND::new(30.0), "RÃºt tiá»n");
    
    // Ãp dá»¥ng phÃ­
    let _ = tk.apply_fee(VND::new(1.0), "PhÃ­ quáº£n lÃ½");
    
    // Ãp dá»¥ng lÃ£i
    let interest = tk.balance() * 0.002; // 0.2%
    tk.apply_interest(interest, "LÃ£i suáº¥t 0.2%");

    tk.display();
    tk.display_transactions();

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 3: Sá»­ dá»¥ng báº£ng lÃ£i suáº¥t chuáº©n
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("\nğŸ“‹ VÃ Dá»¤ 3: Báº£ng lÃ£i suáº¥t báº­c thang");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

    use core_banking::InterestCalculator;

    // Sá»­ dá»¥ng báº£ng lÃ£i suáº¥t chuáº©n tá»« business module
    let interest_table = business::standard_interest_table();
    interest_table.display();

    // TÃ­nh lÃ£i cho cÃ¡c má»©c sá»‘ dÆ° khÃ¡c nhau
    let balances = [500.0, 5000.0, 25000.0];
    for balance in balances {
        let b = VND::new(balance);
        let rate = interest_table.get_applicable_rate(b);
        let interest = interest_table.calculate_interest(b);
        println!("   Sá»‘ dÆ° {}: lÃ£i suáº¥t {} â†’ tiá»n lÃ£i {}", b, rate, interest);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VÃ Dá»¤ 4: MÃ´ phá»ng vá»›i cáº¥u hÃ¬nh máº·c Ä‘á»‹nh
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    println!("\nğŸ“‹ VÃ Dá»¤ 4: MÃ´ phá»ng vá»›i cáº¥u hÃ¬nh máº·c Ä‘á»‹nh");
    println!("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");

    let mut tk_sim = tÃ i_khoáº£n!(tiáº¿t_kiá»‡m "TK002", 5000.0);
    
    // MÃ´ phá»ng 3 nÄƒm vá»›i cáº¥u hÃ¬nh máº·c Ä‘á»‹nh
    let _results = mÃ´_phá»ng! {
        tÃ i_khoáº£n: tk_sim,
        sá»‘_nÄƒm: 3
    };

    println!("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    println!("â•‘                    ğŸ‰ HOÃ€N Táº¤T DEMO ğŸ‰                     â•‘");
    println!("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
}
